<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="test.com.rence.user">
	<!-- 회원가입처리 SQL -->
	<insert id="SQL_INSERT"
		parameterType="test.com.rence.user.UserVO">
		insert into
		userinfo(user_num,auth_no,user_id,user_pw,user_name,user_tel,user_birth)
		values('U'||SEQ_TEST_USER.nextval,#{auth_no},
		#{user_id},#{user_pw},#{user_name},#{user_tel},#{user_birth})
	</insert>


	<!-- Email 중복체크 SQL -->
	<select id="SQL_EMAIL_CHECK"
		resultType="test.com.rence.user.UserVO">
		select * from
		userinfo where user_email=#{user_email}
	</select>

	<!-- 인증번호 보내고 DB저장 SQL -->
	<!-- 인증번호 확인 SQL -->

	<!-- 아이디 중복체크 SQL -->
	<select id="SQL_ID_CHECK"
		resultType="test.com.rence.user.UserVO">
		select * from
		userinfo where user_id=#{user_id}
	</select>


	<!-- 유저로그인 -->
	<select id="SQL_USER_LOGIN"
		resultType="test.com.rence.user.UserVO">
		select * from
		userinfo where user_id=#{user_id} and
		user_pw=#{user_pw}
	</select>

	<!-- 아이디 찾기에서 이메일 가져오기 -->
	<select id="SQL_SELECT_EMAIL"
		resultType="test.com.rence.user.UserVO">
		select * from userinfo where user_email=#{user_email}
	</select>


	<!-- 비밀번호 찾기를 위한 아이디 이메일 -->
	<!-- 	and 연산자를 통해서 아이디와 이메일 모두가 존재하여야 select가 가능함 -->
	<select id="SQL_SELECT_USER_ID_EMAIL" resultType="test.com.rence.user.UserVO">
  	select * from userinfo where user_id=#{user_id} and user_email=#{user_email}
  	</select>

	<!-- 비밀번호 수정 -->
	<update id="SQL_USER_UPDATE_PW"
		parameterType="test.com.rence.user.UserVO">
		update userinfo set user_pw=#{user_pw}where user_id=#{user_id}
	</update>

</mapper>
